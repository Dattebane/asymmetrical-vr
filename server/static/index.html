<html>
  <head>
    <meta charset="utf-8">
    <title>Asymmetrical Aframe - WIP</title>
    <meta name="description" content="Asymmetrical Aframe - WIP">

    <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v3.13.1/dist/aframe-extras.min.js"></script>

    <script src="https://haydenlee.io/networked-aframe/a-saturday-night/js/spawn-in-circle.component.js"></script>
    <script src="https://haydenlee.io/networked-aframe/a-saturday-night/js/show-child.component.js"></script>
    <script src="/resources/randomize-avatar.component.js"></script>
    <script src="/resources/show-avatar.component.js"></script>
    <script src="/resources/select-avatar.component.js"></script>
    <script>window.NAF || document.write('<script src="https://unpkg.com/networked-aframe/dist/networked-aframe.min.js">\x3C/script>')</script>
    <script src="https://unpkg.com/aframe-maze-component@0.1.24/dist/aframe-maze-component.min.js"></script>
  </head>

  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.5/socket.io.min.js"></script>
    <script src="/easyrtc/easyrtc.js"></script>
    <a-scene networked-scene="
      room: dev;
      debug: true;
      adapter: wseasyrtc;
    ">
<!-- /////////////////////////////////////////////////////////// -->
      <a-assets>
        <!-- Mouse model -->
        <a-asset-item id="mouse" src="/resources/mouse/scene.gltf"></a-asset-item>

        <!-- Maze -->
        <a-box static-body id="wall-one" 
          color="#444444" 
          depth="1" width="4" height="10" shadow></a-box>

        <a-cylinder id="end-cap"
          static-body color="silver" 
          depth="1.5" width="1.5" height="10.1"
          radius="0.6"></a-cylinder>

        <!-- <script id="player-template" type="text/html">
          <a-entity></a-entity>
        </script> -->

        <!-- Avatar -->
        <script id="mouse-template" type="text/html">
          <a-entity class="avatar" rotation=".5 .5 .5" scale=".3 .3 .3" gltf-model="#mouse"></a-entity> <!-- userHeight:.01 -->
        </script>

        <script id="god-template" type="text/html">
          <a-entity class="avatar"> <!-- userHeight:30 -->
            <a-sphere></a-sphere>
          </a-entity>
        </script>

        <script id="simple" type="text/html">
          <a-sphere></a-sphere>
        </script>

      </a-assets>

<!-- /////////////////////////////////////////////////////////// -->

      <a-entity id="player" look-controls camera="userHeight:.01" networked="template:#mouse-template; showLocalTemplate:false" select-avatar spawn-in-circle="radius:3" wasd-controls>
        <a-entity ></a-entity>
      </a-entity>

      <a-entity id="ground" position="0 0 0"
        geometry="primitive: plane; width: 10000; height: 10000;" rotation="-90 0 0"
        material="src: #grid; repeat: 10000 10000; transparent: true; metalness:0.6; roughness: 0.4; sphericalEnvMap: #sky;"></a-entity>

      <a-sky color="skyblue"></a-sky>

      <a-entity id="default-maze" 
          maze='size: 10 10; cap: #end-cap; wall: #wall-one; open: W 5 E 5;' 
          position='-30 0.5 -5'>
          </a-entity>

    </a-scene>

<!-- /////////////////////////////////////////////////////////// -->

    <script>
      // On mobile remove elements that are resource heavy
      var isMobile = AFRAME.utils.device.isMobile();

      if (isMobile) {
        var particles = document.getElementById('particles');
        particles.parentNode.removeChild(particles);
      }
    </script>
  </body>
</html>
